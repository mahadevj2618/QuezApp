<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Quiz</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-4">
    <h2 class="text-center mb-4" th:if="${questions != null and !questions.isEmpty()}">
        Quiz on <span th:text="${questions[0].subject}"></span>
    </h2>

    <form action="/submit-quiz" method="post">
        <!-- total number of questions -->
        <input type="hidden" name="total" th:value="${questions.size()}">

        <!-- subject of the quiz -->
        <input type="hidden" name="subject" th:value="${questions[0].subject}">

        <div th:each="q, iStat : ${questions}">
            <div class="card mb-3">
                <div class="card-header">
                    Q[[${iStat.count}]]: [[${q.question}]]
                    <input type="hidden" th:name="'correctAnswers[' + ${iStat.index} + ']'" 
                           th:value="${q.correctAnswer.equals(q.optionA) ? 'A' : 
                                     (q.correctAnswer.equals(q.optionB) ? 'B' : 
                                     (q.correctAnswer.equals(q.optionC) ? 'C' : 'D'))}">
                </div>
                <div class="card-body">
                    <div class="form-check">
                        <input class="form-check-input" type="radio"
                               th:name="'answers[' + ${iStat.index} + ']'"
                               value="A">
                        <label class="form-check-label">[[${q.optionA}]]</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio"
                               th:name="'answers[' + ${iStat.index} + ']'"
                               value="B">
                        <label class="form-check-label">[[${q.optionB}]]</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio"
                               th:name="'answers[' + ${iStat.index} + ']'"
                               value="C">
                        <label class="form-check-label">[[${q.optionC}]]</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio"
                               th:name="'answers[' + ${iStat.index} + ']'"
                               value="D">
                        <label class="form-check-label">[[${q.optionD}]]</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center">
            <button class="btn btn-success" type="submit">Submit Quiz</button>
        </div>
    </form>
</div>
</body>
</html>
